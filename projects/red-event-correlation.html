<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto: Fase 2 - Detección de Escaneo de Red</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Estilos específicos para esta página */
        body {
            font-family: 'Work Sans', sans-serif;
            background-color: var(--background-dark);
            color: var(--text-light);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 40px auto;
            background-color: var(--background-medium);
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        h1, h2, h3 {
            font-family: 'Righteous', cursive;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        h1 {
            font-size: 3em;
        }
        h2 {
            font-size: 2em;
            margin-top: 30px;
        }
        h3 {
            font-size: 1.5em;
            margin-top: 25px;
            color: var(--text-light); /* Subtítulos de sección en blanco */
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        ul {
            margin-bottom: 15px;
            padding-left: 25px;
        }
        li {
            margin-bottom: 8px;
        }
        .image-gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            margin-bottom: 30px;
        }
        .image-gallery img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            transition: transform 0.3s ease;
        }
        .image-gallery img:hover {
            transform: scale(1.03);
        }
        pre {
            background-color: var(--background-dark);
            color: var(--primary-color);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        hr {
            border-color: var(--border-color);
            margin: 40px 0;
        }
        .back-link {
            display: block;
            margin-top: 40px;
            text-align: center;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
            transition: color 0.3s;
        }
        .back-link:hover {
            color: var(--primary-color-dark);
            text-decoration: underline;
        }
        /* Media Queries para responsividad */
        @media (max-width: 768px) {
            .container {
                margin: 20px auto;
                padding: 20px;
            }
            h1 {
                font-size: 2em;
            }
            h2 {
                font-size: 1.5em;
            }
            h3 {
                font-size: 1.3em;
            }
            .image-gallery img {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fase 2: Detección de Escaneo de Red</h1>
        <p>Fecha de Realización: Agosto 2025</p>
        <hr>

        <h2>Introducción</h2>
        <p>This project focuses on a crucial aspect of cybersecurity for an SOC Analyst N1: the **detection and correlation of network scanning activities**. Network scans, often a precursor to more malicious attacks, involve an attacker probing a target system to discover open ports, services, and potential vulnerabilities. Using a Kali Linux endpoint to simulate reconnaissance and Splunk as the SIEM, I learned to identify patterns generated by tools like `ping` and `Nmap` within system logs, thereby enhancing my ability to recognize early signs of a targeted attack.</p>

        <hr>

        <h2>Generación de Eventos de Reconocimiento de Red</h2>
        <p>To simulate realistic network reconnaissance, I performed several activities from the Kali Linux endpoint (192.168.56.10) against the Ubuntu Server VM (192.168.56.100). These actions are designed to generate distinct log entries that can be detected and analyzed in Splunk:</p>
        <ul>
            <li>**`Ping` Scan (ICMP Echo Request):** Used to determine if the target host is active on the network.
                <pre><code>ping -c 5 192.168.56.100</code></pre>
                This command sends 5 ICMP packets to the Ubuntu server. While `ping` itself might not always generate security-critical logs on the target's system log (it's primarily network-level traffic), it's a common initial step for an attacker.</li>
            <li>**`Nmap` Port Scan (TCP/UDP Probes):** A more aggressive form of reconnaissance to discover open ports and running services.
                <pre><code>sudo nmap -sS -p 22,80,443,9997 192.168.56.100</code></pre>
                This command performs a stealth SYN scan (`-sS`) on common ports (SSH, HTTP, HTTPS, Splunk Forwarder) against the Ubuntu server. Nmap scans often generate connection attempts and refusals that can be logged by the firewall or network services.</li>
        </ul>
        <p>These activities were successfully captured and forwarded to Splunk, providing the raw data necessary for detection and correlation.</p>
        <div class="image-gallery">
            <img src="../Image/Imagenes Proyectos/Fase 2/Detección de Actividad de Escaneo de Red desde Kali en Splunk/Ping-Kali-Ubuntu.png" alt="Comando Ping desde Kali a Ubuntu">
            <img src="../Image/Imagenes Proyectos/Fase 2/Detección de Actividad de Escaneo de Red desde Kali en Splunk/Nmap-LogsRaw.png" alt="Salida de Nmap en Kali mostrando el escaneo">
        </div>

        <hr>

        <h2>Análisis y Detección en Splunk</h2>
        <p>Once the network activity logs were ingested into Splunk, the focus shifted to identifying and analyzing them using SPL. The goal was to find patterns indicative of `ping` and `Nmap` scans. I started with broad searches and then refined them:</p>
        <pre><code>index=main host=kali (ping OR nmap)</code></pre>
        <p>This initial search helped to identify general events related to the execution of these commands on the Kali host itself (as commands run on Kali are logged in its `syslog`). To further investigate and correlate these events with potential impacts on the Ubuntu server (even if implicit for `ping`), I used more specific queries and aggregation:</p>
        <ul>
            <li>Detección de `Nmap`:
                <pre><code>index=main host=kali sourcetype=syslog nmap | table _time, host, _raw</code></pre>
                This query helped confirm the `nmap` command execution and its parameters, visible from Kali's own system logs.
            </li>
            <li>Detección de Tráfico de Red (implícito): While `ping` and `nmap` might not always generate direct system logs on the *target* (Ubuntu) unless a firewall explicitly logs dropped packets or a service logs connection attempts, the presence of these commands in the *source* (Kali) logs is the primary indicator of reconnaissance. Advanced scenarios would involve firewall logs from Ubuntu.</li>
            <li>**Correlación de Eventos:** I used `stats` to count occurrences and `transaction` (for more complex scenarios) to group related events.
                <pre><code>index=main host=kali sourcetype=syslog (ping OR nmap) | stats count by _raw | sort -count</code></pre>
                This allowed me to see the frequency of specific network reconnaissance commands, highlighting repeated attempts.
            </li>
        </ul>
        <div class="image-gallery">
            <img src="../Image/Imagenes Proyectos/Fase 2/Detección de Actividad de Escaneo de Red desde Kali en Splunk/Logs-Nmap.png" alt="Resultados de búsqueda de Nmap en Splunk">
            <img src="../Image/Imagenes Proyectos/Fase 2/Detección de Actividad de Escaneo de Red desde Kali en Splunk/Puertos-Nmap.png" alt="Vista de puertos escaneados y detectados por Nmap en Splunk (ejemplo)">
        <hr>

        <h2>Correlación de Eventos y Relevancia de Seguridad</h2>
        <p>For an SOC Analyst N1, detecting network scanning is paramount because it's usually the "first step in a multi-stage attack". By correlating `ping` and `Nmap` activities, analysts can infer a clear picture of an attacker's reconnaissance efforts:</p>
        <ul>
            <li>Early Warning: Identification of these events provides an early warning that a host is being probed.
            <li>Target Identification: Knowing which ports and services are being targeted helps prioritize defensive actions.
            <li>Attacker Intent: Repeated or wide-ranging scans suggest a determined attacker looking for vulnerabilities.
            <li>Contextual Awareness: Correlating these logs with other event types (e.g., subsequent authentication failures) can build a comprehensive incident timeline.</li>
        </ul>
        <p>In a real SOC, alerts would be configured in Splunk to trigger when specific Nmap signatures or a high volume of ping requests are detected from an external or suspicious source IP, enabling a proactive response.</p>

        <hr>

        <h2>Conclusión y Aprendizajes</h2>
        <p>This project provided critical hands-on experience in detecting network reconnaissance activity using Splunk. I gained a practical understanding of how `ping` and `Nmap` commands manifest in system logs and how to effectively leverage SPL to search, filter, and correlate these events. This ability to identify early attack indicators is a foundational skill for any SOC N1 analyst, empowering me to contribute to the proactive defense of an organization's digital assets by identifying and responding to malicious scanning activities before they escalate.</p>
        
        <a href="../index.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Volver al Portafolio Principal</a>
    </div>
</body>
</html>
