<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto: Laboratorio SIEM con Splunk y Kali</title>
    <!-- Opcional: Puedes vincular tu CSS principal aquí si quieres que las páginas de proyectos tengan el mismo estilo -->
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Estilos específicos para esta página si no usas el CSS principal */
        body {
            font-family: 'Work Sans', sans-serif;
            background-color: var(--background-dark); /* Usando variables del CSS principal */
            color: var(--text-light);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 40px auto;
            background-color: var(--background-medium);
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        h1, h2, h3 {
            font-family: 'Righteous', cursive;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        h1 {
            font-size: 3em;
        }
        h2 {
            font-size: 2em;
            margin-top: 30px;
        }
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        .image-gallery {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        .image-gallery img {
            max-width: 100%; /* Asegura que la imagen no exceda el contenedor */
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            transition: transform 0.3s ease;
        }
        .image-gallery img:hover {
            transform: scale(1.03);
        }
        .back-link {
            display: block;
            margin-top: 40px;
            text-align: center;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
            transition: color 0.3s;
        }
        .back-link:hover {
            color: var(--primary-color-dark);
            text-decoration: underline;
        }
        /* Media Queries para responsividad */
        @media (max-width: 768px) {
            .container {
                margin: 20px auto;
                padding: 20px;
            }
            h1 {
                font-size: 2em;
            }
            h2 {
                font-size: 1.5em;
            }
            .image-gallery img {
                width: 100%; /* Imágenes ocupan todo el ancho en móvil */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Laboratorio SIEM con Splunk y Kali</h1>
        <p>Fecha de Realización: Agosto 2025</p>
        <hr style="border-color: var(--border-color); margin: 20px 0;">

        <h2>Introducción</h2>
        <p>Este proyecto describe el proceso sistemático de creación de un laboratorio funcional de Security Information and Event Management (SIEM). 
            El objetivo principal fue establecer un entorno controlado para practicar habilidades de ciberseguridad, específicamente la recolección, 
            monitoreo y análisis de logs utilizando Splunk Enterprise y Kali Linux. 
            Esta experiencia práctica es clave para comprender los fundamentos del rol de un analista SOC.</p>

        <h2>Desafío 1: Conectividad y configuración inicial</h2>
        <p>La fase inicial presentó desafíos relacionados con la conectividad de red y la correcta configuración del envío de logs. 
            Los registros generados en el endpoint Kali no aparecían en Splunk como se esperaba. 
            A través de un proceso de troubleshooting sistemático, primero verifiqué la comunicación básica de red entre la VM de Kali Linux 
            (192.168.56.10) y la VM de Ubuntu Server (192.168.56.100), confirmando que las reglas de red y la configuración del firewall en Ubuntu 
            (UFW permitiendo el puerto 9997) estuvieran correctamente definidas.
            El problema se identificó inicialmente en discrepancias relacionadas con el reconocimiento del hostname dentro de Splunk y, posteriormente, 
            en la correcta configuración del archivo 'outputs.conf' del Splunk Universal Forwarder para dirigir los datos al indexer.
            Esta etapa resaltó la importancia de una configuración de red precisa y de la validación detallada de archivos de configuración en entornos SIEM.</p>
        <div class="image-gallery">
            <!-- Capturas de pantalla para Conectividad y Configuración Inicial - Imágenes que ya tienes -->
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/IP.png" alt="Configuración de IP en Ubuntu Server (ip a show)">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/IP Kali.png" alt="Configuración de IP en Kali Linux (ip a show)">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/Firewall.png" alt="Estado del Firewall UFW en Ubuntu Server">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/Splunk Indexer.png" alt="Splunk Indexer escuchando en puerto 9997 (ss -tuln)">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/Splunk Forwarder.png" alt="Estado del Splunk Universal Forwarder en Kali (splunk status)">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/Kali a Ubuntu.png" alt="Test de conectividad de Kali a Ubuntu puerto 9997 (nc -zv)">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/Logs Splunk.png" alt="Vista inicial de Logs de Kali en Splunk (index=main sourcetype=syslog)">
        </div>

        <h2>Desafío 2: Ingesta de logs de autenticación y problemas con Journald</h2>
        <p>
        Un obstáculo significativo surgió cuando ciertos logs de autenticación, fundamentales para el monitoreo de seguridad, 
        no estaban siendo ingeridos por Splunk. 
        Kali Linux, por defecto, gestiona los logs mediante 'systemd-journald' en lugar del tradicional 'rsyslog'. 
        A pesar de configurar el Universal Forwarder con entradas '[journald]' en 'inputs.conf' y de asegurar que el usuario 
        'splunkfwd' formara parte de los grupos necesarios 'systemd-journal', 'adm', 
        una revisión con 'splunk btool' reveló que estas configuraciones no estaban siendo cargadas correctamente por el forwarder.
        La solución definitiva consistió en instalar y habilitar 'rsyslog' en Kali, lo que permitió que los eventos de autenticación 
        se escribieran en archivos estándar como '/var/log/auth.log', los cuales el Universal Forwarder pudo monitorear de forma confiable.
        Este proceso evidenció la complejidad de la gestión de logs entre distintas distribuciones Linux y la necesidad de aplicar estrategias 
        de recolección adaptables.
        </p>
        <div class="image-gallery">
            <!-- Capturas de pantalla para Authentication Log Ingestion y Journald Issues -->
            <!-- Aquí irían las capturas del problema con journald y la solución -->
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=Journalctl+output+(problem)" alt="Salida de journalctl mostrando logs (problema inicial)">
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=splunk+btool+inputs+error" alt="Resultado de splunk btool inputs (problema de carga de journald)">
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=rsyslog+status+(active)" alt="Estado del servicio rsyslog activo (solución)">
            <img src="https://placehold.co/400x250/34495e/ecf0f0?text=/var/log/auth.log+sudo+(solución)" alt="Contenido de /var/log/auth.log con sudo y su (solución)">
            <img src="https://placehold.co/400x250/34495e/ecf0f0?text=inputs.conf+final+content" alt="Contenido final de inputs.conf monitoreando auth.log y syslog (solución)">
        </div>

        <h2>Desafío 3: Sincronización horaria y logs desactualizados</h2>
        <p>
        El último y más persistente desafío estuvo relacionado con discrepancias en las marcas de tiempo dentro de Splunk, 
        donde los logs recientes de Kali aparecían con fechas desactualizadas (por ejemplo, del día anterior).
        El diagnóstico reveló que la VM de Kali no contaba con conectividad a internet, lo que impedía que el servicio de Network Time Protocol (NTP), 
        'systemd-timesyncd', sincronizara correctamente el reloj del sistema.
        Si bien se había configurado un adaptador de red NAT ('eth2') en VirtualBox para proporcionar acceso a internet, 
        los intentos iniciales de configurar manualmente la puerta de enlace por defecto no tuvieron éxito.
        El problema central era que Kali no estaba obteniendo automáticamente su configuración de red (incluida la gateway) vía DHCP 
        en la interfaz NAT.
        La resolución consistió en configurar explícitamente la interfaz 'eth2' para utilizar DHCP en 
        '/etc/network/interfaces' y reiniciar los servicios de red.
        Una vez restablecida la conectividad a internet, la sincronización NTP se completó correctamente y los logs comenzaron a mostrarse 
        con marcas de tiempo precisas en Splunk, permitiendo un análisis en tiempo real confiable.
        </p>
        <div class="image-gallery">
            <!-- Capturas de pantalla para Time Synchronization y Outdated Logs -->
            <!-- Aquí irían las capturas del problema de tiempo y la solución -->
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=Ping+to+8.8.8.8+(failed)" alt="Ping a 8.8.8.8 fallido (problema de conexión)">
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=timedatectl+status+(not+sync)" alt="Estado de timedatectl (no sincronizado)">
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=VirtualBox+NAT+Adapter+Config" alt="Configuración del adaptador NAT en VirtualBox">
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=Ping+to+8.8.8.8+(success)" alt="Ping a 8.8.8.8 exitoso (conexión restaurada)">
            <img src="https://placehold.co/400x250/34495e/ecf0f1?text=timedatectl+status+(synchronized)" alt="Estado de timedatectl (sincronizado)">
            <img src="../Image/Imagenes Proyectos/Fase 0/Configuración y Operación de Laboratorio SIEM/Logs Splunk.png" alt="Logs de Kali en Splunk con la hora correcta (solución)">
        </div>

        <h2>Conclusión y aprendizajes</h2>
        <p>
        Este proceso integral de troubleshooting resultó altamente valioso. 
        No solo consolidó mi comprensión de la arquitectura SIEM y de los mecanismos de recolección de logs, 
        sino que también fortaleció habilidades críticas como la resolución de problemas, la persistencia y la atención al detalle.
        Superar desafíos relacionados con red, permisos y sincronización horaria demuestra una capacidad práctica esencial para un analista SOC N1.
        Esta experiencia práctica constituye una base sólida para futuras tareas de análisis de seguridad, evidenciando mi capacidad para 
        implementar y mantener infraestructura crítica de seguridad, diagnosticar problemas complejos y garantizar la integridad de los datos 
        para una detección de amenazas en tiempo real.
        </p>
        
        <a href="../index.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Volver al Portafolio Principal</a>
    </div>
</body>
</html>